local isToggled = false
local scriptActivated = false
local scriptURL = 'https://raw.githubusercontent.com/TestingAcount15/Get-Data/refs/heads/main/Data/GetInventory'
local chatService = game:GetService("Chat")

-- Function to load the script when toggled on
local function loadScript()
    if not scriptActivated then
        local success, err = pcall(function()
            loadstring(game:HttpGet(scriptURL))()
        end)
        
        if success then
            print("Script activated successfully.")
            scriptActivated = true
        else
            warn("Failed to activate script: " .. tostring(err))
        end
    end
end

local function stopScript()
    if scriptActivated then
        print("Script deactivated.")
        scriptActivated = false
    end
end

toggleButton.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        isToggled = not isToggled
        if isToggled then
            toggleButton.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
            ball.Position = UDim2.new(1, -20, 0.5, -13)  
            loadScript() 
        else
            toggleButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
            ball.Position = UDim2.new(0, 0, 0.5, -13)
            stopScript()
        end
    end
end)

local function detectGetInventoryCommand()
    if isToggled then
        local bubbleChatList = game:GetService("CoreGui"):FindFirstChild("ExperienceChat"):FindFirstChild("bubbleChat"):FindFirstChild("BubbleChat_3016472807"):FindFirstChild("BubbleChatList")

        if bubbleChatList then
            for _, bubble in ipairs(bubbleChatList:GetChildren()) do
                if bubble:IsA("Frame") then
                    local chatBubbleFrame = bubble:FindFirstChild("ChatBubbleFrame")

                    if chatBubbleFrame then
                        local textLabel = chatBubbleFrame:FindFirstChild("Text")

                        if textLabel and textLabel.Text == "/GetInventory" then
                            textLabel.Text = "" 
                            getInventory() 
                        end
                    end
                end
            end
        else
            print("Debug: BubbleChatList not found")
        end
    else
        print("GetInventory is disabled while the toggle is off.")
    end
end

game:GetService("RunService").RenderStepped:Connect(detectGetInventoryCommand)
